#ifndef _NTC_H
#define _NTC_H

#include "common.h"

#define NTC_CALCULATE_FLOAT				(0)

/*******************************************************************************
 * NTC传感器，深圳富温传感器技术有限公司
 * 阻值：10K Ohms at 25deg.C
 * B值：3950K at 25/50deg.C
 */
#define NTC_TABLE_LAYER					(25)		/* 10度一个层级，共24层 */
#define NTC_TABLE_INDEX					(10)		/* 分度标识 */
#define NTC_TABLE_TEMP_OFFSET			(40)		/* NTC查表温度偏移 40℃ */

#if NTC_CALCULATE_FLOAT
	#define NTC_REF_RES					(float)(10.0)		/* 分压电阻值，单位欧姆 */
#else
	#define NTC_REF_RES					(uint32_t)(10000)		/* 分压电阻值，单位欧姆 */
#endif
	
#define STM32_AD_FULL_VALUE				(4096)

#if NTC_CALCULATE_FLOAT
static const float NTC_Table[NTC_TABLE_LAYER][NTC_TABLE_INDEX] =
{
   /*  0      9      8      7      6      5      4      3      2      1 */
/* 0*/{277.2, 263.6, 250.1, 236.8, 224.0, 211.5, 199.6, 188.1, 177.3, 167.0}, /*-30*/
/* 1*/{157.2, 148.1, 139.4, 131.3, 123.7, 116.6, 110.0, 103.7, 97.9 , 92.50}, /* -20 */
/* 2*/{87.43, 82.79, 78.44, 74.36, 70.53, 66.92, 63.54, 60.34, 57.33, 54.50}, /* -10 */
/* 3*/{51.82, 49.28, 46.89, 44.62, 42.48, 40.45, 38.53, 36.70, 34.97, 33.33}, /* -0 */

	/* 0	   1	  2      3      4      5      6      7      8      9 */
/* 4*/{31.770, 30.250, 28.820, 27.450, 26.160, 24.940, 23.770, 22.670, 21.620, 20.630},	/*   0 */
/* 5*/{19.680, 18.780, 17.930, 17.120, 16.350, 15.620, 14.930, 14.260, 13.630, 13.040},	/*  10 */
/* 6*/{12.470, 11.920, 11.410, 10.910, 10.450, 10.000, 9.575,  9.170,  8.784,  8.416},	/*  20 */
/* 7*/{8.064,  7.730,  7.410,  7.106,  6.815,  6.538,  6.273,  6.020,  5.778,  5.548},	/*  30 */
/* 8*/{5.327,  5.117,  4.915,  4.723,  4.539,  4.363,  4.195,  4.034,  3.880,  3.733},	/*  40 */
/* 9*/{3.592,  3.457,  3.328,  3.204,  3.086,  2.972,  2.863,  2.759,  2.659,  2.564},	/*  50 */
/*10*/{2.472,  2.384,  2.299,  2.218,  2.141,  2.066,  1.994,  1.926,  1.860,  1.796},	/*  60 */
/*11*/{1.735,  1.677,  1.621,  1.567,  1.515,  1.465,  1.417,  1.371,  1.326,  1.284},	/*  70 */
/*12*/{1.243,  1.203,  1.165,  1.128,  1.093,  1.059,  1.027,  0.996,  0.965,  0.936},	/*  80 */
/*13*/{0.908,  0.881,  0.855,  0.830,  0.805,  0.782,  0.759,  0.737,  0.715,  0.695},	/*  90 */
/*14*/{0.674,  0.656,  0.638,  0.620,  0.603,  0.586,  0.569,  0.554,  0.538,  0.523},	/* 100 */
/*15*/{0.508,  0.494,  0.480,  0.467,  0.454,  0.441,  0.429,  0.417,  0.406,  0.394},	/* 110 */
/*16*/{0.384,  0.373,  0.363,  0.353,  0.343,  0.334,  0.325,  0.317,  0.308,  0.300},	/* 120 */
/*17*/{0.292,  0.285,  0.277,  0.270,  0.263,  0.257,  0.250,  0.244,  0.238,  0.232},	/* 130 */
/*18*/{0.226,  0.220,  0.215,  0.210,  0.204,  0.199,  0.195,  0.190,  0.186,  0.181},	/* 140 */
/*19*/{0.177,  0.173,  0.169,  0.165,  0.161,  0.158,  0.154,  0.151,  0.147,  0.144},	/* 150 */
/*20*/{0.141,  0.138,  0.135,  0.132,  0.129,  0.127,  0.124,  0.121,  0.119,  0.116},	/* 160 */
/*21*/{0.114,  0.112,  0.109,  0.107,  0.105,  0.103,  0.101,  0.099,  0.097,  0.095},	/* 170 */
/*22*/{0.093,  0.091,  0.089,  0.087,  0.086,  0.084,  0.082,  0.081,  0.079,  0.077},	/* 180 */
/*23*/{0.076,  0.074,  0.073,  0.071,  0.070,  0.069,  0.067,  0.066,  0.065,  0.063},	/* 190 */
/*24*/{0.062}																			/* 200 */
};

#else
static const uint32_t NTC_Table[NTC_TABLE_LAYER][NTC_TABLE_INDEX] =
{
   /*  0      9      8      7      6      5      4      3      2      1 */
/* 0*/{277200, 263600, 250100, 236800, 224000, 211500, 199600, 188100, 177300, 167000},/*-40*/
/* 1*/{157200, 148100, 139400, 131300, 123700, 116600, 110000, 103700, 97900 , 92500}, /* -30 */
/* 2*/{87430,  82790,  78440,  74360,  70530,  66920,  63540,  60340,  57330,  54500}, /* -20 */
/* 3*/{51820,  49280,  46890,  44620,  42480,  40450,  38530,  36700,  34970,  33330}, /* -10 */

	/* 0	   1	  2      3      4      5      6      7      8      9 */
/* 4*/{31770,  30250, 28820, 27450, 26160, 24940, 23770, 22670, 21620, 20630},	/*   0 */
/* 5*/{19680,  18780, 17930, 17120, 16350, 15620, 14930, 14260, 13630, 13040},	/*  10 */
/* 6*/{12470,  11920, 11410, 10910, 10450, 10000, 9575,  9170,  8784,  8416},	/*  20 */
/* 7*/{8064,   7730,  7410,  7106,  6815,  6538,  6273,  6020,  5778,  5548},	/*  30 */
/* 8*/{5327,   5117,  4915,  4723,  4539,  4363,  4195,  4034,  3880,  3733},	/*  40 */
/* 9*/{3592,   3457,  3328,  3204,  3086,  2972,  2863,  2759,  2659,  2564},	/*  50 */
/*10*/{2472,   2384,  2299,  2218,  2141,  2066,  1994,  1926,  1860,  1796},	/*  60 */
/*11*/{1735,   1677,  1621,  1567,  1515,  1465,  1417,  1371,  1326,  1284},	/*  70 */
/*12*/{1243,   1203,  1165,  1128,  1093,  1059,  1027,  996,   965,   936},	/*  80 */
/*13*/{908,    881,   855,   830,   805,   782,   759,   737,   715,   695},	/*  90 */
/*14*/{674,    656,   638,   620,   603,   586,   569,   554,   538,   523},	/* 100 */
/*15*/{508,    494,   480,   467,   454,   441,   429,   417,   406,   394},	/* 110 */
/*16*/{384,    373,   363,   353,   343,   334,   325,   317,   308,   300},	/* 120 */
/*17*/{292,    285,   277,   270,   263,   257,   250,   244,   238,   232},	/* 130 */
/*18*/{226,    220,   215,   210,   204,   199,   195,   190,   186,   181},	/* 140 */
/*19*/{177,    173,   169,   165,   161,   158,   154,   151,   147,   144},	/* 150 */
/*20*/{141,    138,   135,   132,   129,   127,   124,   121,   119,   116},	/* 160 */
/*21*/{114,    112,   109,   107,   105,   103,   101,   99,    97,    95},		/* 170 */
/*22*/{93,     91,    89,    87,    86,    84,    82,    81,    79,    77},		/* 180 */
/*23*/{76,     74,    73,    71,    70,    69,    67,    66,    65,    63},		/* 190 */
/*24*/{62}																		/* 200 */
};
#endif

/******************************************************************************/
float NTC_GetTemp(uint16_t analogValue);

#endif
